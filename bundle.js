import g from"react";import ie from"react-dom/client";import{HashRouter as ne,Route as K,Routes as se}from"react-router-dom";import d,{useCallback as N,useState as te}from"react";var I={species:null,family:null,allSpotted:[],currentIndex:-1};import{useEffect as J,useState as F}from"react";var M=e=>e.reduce((r,i)=>r+i.species.length,0),E=(e,r)=>`Bird Tracker ${e}/${r}`,L=e=>{let r=e.split(`
`),i=[],o=null;return r.forEach(n=>{let l=n.trim();if(!l)return;let m=l.match(/^(\d+)\s+([^,]+)(?:,(\d{4}-\d{2}-\d{2}))?/);if(m){if(o){let c=!!m[3];o.species.push({index:parseInt(m[1]),name:m[2].trim(),spotted:c,spottedDate:m[3]||void 0})}return}(!o||o&&o.species.length>0)&&(o={family:l,species:[]},i.push(o))}),i};var Q=()=>{let[e,r]=F([]),[i,o]=F(0),[n,l]=F(0);return J(()=>{(async()=>{try{let v=await(await fetch("./birds.txt")).text(),b=L(v),C=b.flatMap(S=>S.species.filter(a=>a.spotted));r(b),o(M(b)),l(C.length)}catch(c){console.error("Error loading bird data:",c)}})()},[]),{families:e,totalBirds:i,spottedBirds:n}},T=Q;import u from"react";var t={birdCard:"o",birdIndex:"t",birdNameContainer:"e",birdName:"a",familyCardWrapper:"r",skeleton:"d",shimmer:"n",skeletonText:"l"};var W=u.memo(({imagePath:e,fallbackPath:r,index:i,name:o,isClickable:n,onImageClick:l})=>u.createElement("div",{className:t.birdCard,onClick:n?()=>l(e):void 0,style:{backgroundImage:`url(${e}), url(${r})`,cursor:n?"pointer":"default"}},u.createElement("div",{className:t.birdIndex},"#",i.toString().padStart(3,"0")),u.createElement("div",{className:t.birdNameContainer},u.createElement("p",{className:t.birdName},o)))),P=u.memo(({family:e,onImageClick:r})=>{let i=e.species.filter(o=>o.spotted);return u.createElement("div",{className:t.familyCardWrapper},u.createElement(W,{imagePath:"",fallbackPath:"",index:0,name:e.family,isClickable:i.length>0,onImageClick:r}))}),z=u.memo(({species:e,onImageClick:r})=>{let i=e.spotted?`./pictures/${e.index}.png`:"./placeholder_bird.png";return u.createElement(W,{imagePath:i,fallbackPath:"./placeholder_bird.png",index:e.index,name:e.name,isClickable:e.spotted,onImageClick:r})});import f,{useCallback as O,useEffect as R,useState as ee}from"react";import x from"react";var _=({onPrev:e,onNext:r,showPrev:i,showNext:o})=>x.createElement("div",{className:"navigation-arrows"},i?x.createElement("button",{className:"arrow prev",onClick:e,"aria-label":"Previous Image"},"\u2039"):x.createElement("div",{className:"arrow placeholder"}),o?x.createElement("button",{className:"arrow next",onClick:r,"aria-label":"Next Image"},"\u203A"):x.createElement("div",{className:"arrow placeholder"})),Y=({onClick:e})=>x.createElement("button",{className:"close-button",onClick:e,"aria-label":"Close"},"\xD7"),j=({scale:e,setScale:r})=>{let i=()=>r(n=>Math.min(n+.1,3));return x.createElement("div",{className:"zoom-controls"},x.createElement("button",{onClick:()=>r(n=>Math.max(n-.1,.5)),"aria-label":"Zoom Out"},"-"),x.createElement("span",null,(e*100).toFixed(0),"%"),x.createElement("button",{onClick:i,"aria-label":"Zoom In"},"+"))};var X=.5,Z=3,G=.1,re=f.memo(({species:e,family:r,allSpotted:i,currentIndex:o,onClose:n,onPrev:l,onNext:m})=>{let[c,v]=ee(1),b=e?.spotted?`./pictures/${e.index}.png`:null,C=O(()=>{v(a=>Math.min(a+G,Z))},[]),S=O(()=>{v(a=>Math.max(a-G,X))},[]);return R(()=>{if(!b)return;let a=p=>{switch(p.key){case"ArrowLeft":l();break;case"ArrowRight":m();break;case"Escape":n();break;case"+":C();break;case"-":S();break;default:break}},s=p=>{p.preventDefault(),v(y=>Math.min(Math.max(X,y+p.deltaY*-.01),Z))};return globalThis.addEventListener("keydown",a),globalThis.addEventListener("wheel",s,{passive:!1}),()=>{globalThis.removeEventListener("keydown",a),globalThis.removeEventListener("wheel",s)}},[b,n,l,m,C,S]),b?f.createElement("div",{className:"expanded-image-overlay",onClick:n},f.createElement("div",{className:"expanded-image-header"},f.createElement("div",{className:"expanded-image-info"},f.createElement("div",{className:"species-name"},e?.name),f.createElement("div",{className:"family-name"},r)),f.createElement(Y,{onClick:n})),f.createElement(_,{onPrev:l,onNext:m,showPrev:o>0,showNext:o<i.length-1}),f.createElement("div",{className:"image-container"},f.createElement("img",{src:b,alt:`Expanded view of ${e?.name}`,className:"expanded-image",style:{transform:`scale(${c})`},onClick:a=>a.stopPropagation()})),f.createElement(j,{scale:c,setScale:v})):null}),A=re;import h from"react";var D=()=>h.createElement("div",{className:t.familyCard},h.createElement("div",{className:`${t.imageContainer} ${t.skeleton}`}),h.createElement("div",{className:t.familyInfo},h.createElement("div",{className:`${t.skeletonText} ${t.skeleton}`}),h.createElement("div",{className:`${t.skeletonText} ${t.skeleton}`}))),$=()=>h.createElement("div",{className:t.speciesCard},h.createElement("div",{className:`${t.imageContainer} ${t.skeleton}`}),h.createElement("div",{className:t.speciesInfo},h.createElement("div",{className:`${t.skeletonText} ${t.skeleton}`}),h.createElement("div",{className:`${t.skeletonText} ${t.skeleton}`})));var k={birdContainer:"p",birdTrackerTitle:"i",familyTitle:"s",speciesGrid:"g"};var oe=()=>{let{families:e,totalBirds:r,spottedBirds:i}=T(),o=e.length===0&&r===0&&i===0,[n,l]=te(I),m=N((a,s)=>{let p=e.flatMap(w=>w.species.filter(B=>B.spotted)),y=p.findIndex(w=>w.index===a.index);l({species:a,family:s,allSpotted:p,currentIndex:y})},[e]),c=N(a=>{l(s=>{let p=a==="prev"?s.currentIndex-1:s.currentIndex+1;if(p<0||p>=s.allSpotted.length)return s;let y=s.allSpotted[p],w=e.find(B=>B.species.some(q=>q.index===y.index))?.family||"";return{...s,species:y,family:w,currentIndex:p}})},[e]),v=N(()=>l(I),[]),b=N(()=>c("prev"),[c]),C=N(()=>c("next"),[c]),S=N(a=>d.createElement(d.Fragment,{key:a.family},d.createElement(P,{family:a,onImageClick:()=>m(a.species[0],a.family)}),a.species.map(s=>d.createElement(z,{key:s.index,species:s,onImageClick:()=>m(s,a.family)}))),[m]);return o?d.createElement("div",{className:k.birdContainer},d.createElement("h1",{className:k.birdTrackerTitle},"Loading..."),d.createElement("div",{className:k.speciesGrid},Array.from({length:3}).map((a,s)=>d.createElement(d.Fragment,{key:s},d.createElement(D,null),Array.from({length:3}).map((p,y)=>d.createElement($,{key:y})))))):d.createElement("div",{className:k.birdContainer},d.createElement("h1",{className:k.birdTrackerTitle},E(i,r)),d.createElement("div",{className:k.speciesGrid},e.map(S)),n.species&&d.createElement(A,{...n,onClose:v,onPrev:b,onNext:C}))},H=d.memo(oe);var de=()=>g.createElement("main",{style:{padding:"1rem"}},g.createElement("h1",null,"404 Not Found"),g.createElement("p",null,"The page you're looking for does not exist.")),le=()=>g.createElement(se,null,g.createElement(K,{path:"/",element:g.createElement(H,null)}),g.createElement(K,{path:"*",element:g.createElement(de,null)})),U=document.getElementById("root");if(!U)throw new Error("Root element not found. Please ensure there is an element with id 'root'.");var me=ie.createRoot(U);me.render(g.createElement(g.StrictMode,null,g.createElement(ne,null,g.createElement(le,null))));
//# sourceMappingURL=bundle.js.map
